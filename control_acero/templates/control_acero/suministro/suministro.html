{% extends 'control_acero/layout.html' %}
{% block title_module %}
	SUMINISTRO
{% endblock %}
{% block content %}
	{% if messages %}	    
		{% for message in messages %}
	    	<div class="alert alert-warning">{{message}}</div>
	    {% endfor %}
	{% endif %}
	<div class="col-xs-12">
		<div class="col-md-12 text-center input-group">
			<label>Elige Orden</label>
			<select class="form-control">
				<option>Orden1</option>
				<option>Orden2</option>
			</select>
		</div>
		<div class="col-md-12 text-center">
			<table id="tablaTrabajo" class="table table-hover">
				<thead>
					<tr>
						<th>Cantidad</th>
						<th>Peso Solicitado</th>
						<th>Peso Recibido</th>
						<th>Asignar Proveedor</th>
						<th>Asignar Taller</th>
						<th>Certificado</th>
						<th>Remision</th>
						<th>Transporte</th>
						<th>Detalle</th>
						<th>Asignar Cantidad</th>
						<th>Seleccionar</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>1</td>
						<td>2000 kg</td>
						<td><input type="text" name="recibido_0" id="recibido_0" /></td>
						<td><input type="text" name="proveedor_0" id="proveedor_0" /></td>
						<td><input type="text" name="taller_0" id="taller_0" /></td>
						<td><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></td>
						<td><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></td>
						<td><input type="text" name="transporte_0" id="transporte_0" /></td>
						<td><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></td>
						<td><input type="text" name="cantidad_0" id="cantidad_0"/></td>
						<td><input type="checkbox" name="test" value="0" /></td>
					</tr>
					<tr>
						<td>1</td>
						<td>3000 kg</td>
						<td><input type="text" name="recibido_1" id="recibido_1" /></td>
						<td><input type="text" name="proveedor_1" id="proveedor_1" /></td>
						<td><input type="text" name="taller_1" id="taller_1" /></td>
						<td><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></td>
						<td><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span></td>
						<td><input type="text" name="transporte_1" id="transporte_1" /></td>
						<td><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></td>
						<td><input type="text" name="cantidad_1" id="cantidad_1"/></td>
						<td><input type="checkbox" name="test" value="1" /></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="text-right col-md-12">
			<button type="button" name="btnAgregaAsignacion" id="btnAgregaAsignacion" class="btn btn-primary">Agregar</button>
		</div>
		<div class="col-md-12 text-center">
			<table id="tablaAsignacion" class="table table-hover">
				<thead>
					<tr>
						<th class="text-center">Cantidad Asignada</th>
						<th class="text-center">Proveedor Asignado</th>
						<th class="text-center">Taller Asignado</th>
						<th class="text-center">Transporte</th>
						<th class="text-center">Acciones</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
		<div class="text-left col-md-12">
			<button type="button" class="btn btn-success">Guardar</button>
		</div>
	</div>

	<!-- Modal Busqueda-->
	<div class="modal fade" id="modalBuscar" tabindex="-1" role="dialog" aria-labelledby="modalBuscarLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="modalBuscarLabel">Busqueda Frentes de Trabajo</h4>
				</div>
				<div class="modal-body">
						<div class="col-md-6">
							<label>Folio</label>
						</div>
						<div class="col-md-6">
							<input class="form-control" type="text"/>
						</div>
						<div class="col-md-6">
							<label>Ubicaci√≥n</label>
						</div>
						<div class="col-md-6">
							<input class="form-control" type="text"/>
						</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					<button type="button" class="btn btn-primary">Buscar</button>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		$( "#btnAgregaAsignacion" ).click(function() {
			var tabla = '';
			$("input[name='test']").each( function () {
				if($(this).is(":checked")){
					var value = this.value;
					var recibido = $("#recibido_"+value).val();
					var proveedor = $("#proveedor_"+value).val();
					var taller = $("#taller_"+value).val();
					var transporte = $("#transporte_"+value).val();
					var cantidad = $("#cantidad_"+value).val();
					tabla += '<tr>'
								+'<td class="text-center">'+cantidad+'</td>'
								+'<td class="text-center">'+proveedor+'</td>'
								+'<td class="text-center">'+taller+'</td>'
								+'<td class="text-center">'+transporte+'</td>'
								//+'<td class="text-center">'+cantidad+'</td>'
								+'<td class="text-center">---</td>'
							+'<tr>';
				}
				//alert($(this).pop());
			});
			$("#tablaAsignacion").append(tabla);
			//var remove = $(this).attr("idremove");
            //$("#tablaTrabajo tbody tr:eq(" + remove + ")").hide();
		});
	</script>
{% endblock %}